<!DOCTYPE html>

<html lang="en"
    class=" js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers no-applicationcache svg inlinesvg smil svgclippaths">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <title>Login</title>
    <script src="modernizr-2.8.3.js"></script>
    <link href="bootstrap.css" rel="stylesheet">
    <link href="Site.css" rel="stylesheet">
    <link href="favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css"
        integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14=" crossorigin="" />
</head>

<body>

    <script src="jquery-3.4.1.js" type="text/javascript"></script>
    <script src="bootstrap.js" type="text/javascript"></script>
    <script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js"
        integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg=" crossorigin=""></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js"></script>



    <header>
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top bg-primary">
            <div class="container nav-space">
                <a class="navbar-brand" href="dashboard.html">
                    <i class="bi bi-laptop" role="img" aria-label="Logo"></i>
                    Lit Meter
                </a>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
                    aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="nav navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="dashboard.html">Dashboard</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="report.html">Report</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="resolve.html">Resolve</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="donate.html">Donate</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="login.html">Log Out</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <div class="container body-content">
        <div class="row" style="margin-top: 5%;  margin-bottom: 3%;">
            <h1 style="text-align: center; margin-bottom: 2%;">Welcome to the LitMeter!</h1>
            <p>Litmeter makes picking up litter fun!</p>
        </div>
        <div class="row" style="margin-top: 5%;  margin-bottom: 3%;">
            <div class="col-sm-8">
                <div id="map">
                    <script>

                        var map = L.map('map').setView([43.7869394036554, -79.18947306043347], 18);
                        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                            maxZoom: 19,
                            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
                        }).addTo(map);

                        var popup = L.popup();

                        function onMapClick(e) {
                            popup
                                .setLatLng(e.latlng)
                                .setContent("You clicked the map at " + e.latlng.toString())
                                .openOn(map);
                            console.log(e);

                            document.getElementById('long').innerHTML = e.latlng.lng;
                            document.getElementById('lat').innerHTML = e.latlng.lat;
                        }

                        map.on('click', onMapClick);

                        var marker = L.marker([43.7869394036554, -79.18947306043347]).addTo(map);
                        marker.bindPopup("<b>Hello world!</b><br>I am a popup.").openPopup();
                    </script>
                </div>
            </div>
            <div class="col-sm-4">
                <h2>Information</h2>
                <label for="title" class="form-label" style="margin-top: 2%">Title</label>
                <input name="title" type="text" class="form-control" id="title" placeholder="Title" value="" required>
                <div class="invalid-feedback">
                    Valid number is required.
                </div>

                <label for="message" class="form-label" style="margin-top: 2%">Description</label>
                <input name="message" type="text" class="form-control" id="description" placeholder="Description"
                    value="" required>
                <div class="invalid-feedback">
                    Valid number is required.
                </div>

                <label for="commentTextArea" class="form-label" style="margin-top: 2%">Longitude</label>
                <div id="long"></div>

                <label for="commentTextArea" class="form-label" style="margin-top: 2%">Latitude</label>
                <div id="lat"></div>

                <button type="submit" class="btn btn-primary mt-5" id="sendMessage"
                    style="margin-left: 47%; margin-top: 10%">Submit</button>
                <input type="hidden" name="_next" value="done.html">
            </div>
        </div>
        <hr>
        <footer>
            <p>Â© 2022 - Jeffery Hu</p>
        </footer>
    </div>

    </form>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
        </script>
    <script>
        document.getElementById("sendMessage").onclick = function () {
            window.alert("Ping");
            console.log(urlParams.get('title'));
            axios.post('/location/add', {
                firstName: 'Fred',
                lastName: 'Flintstone'
            })
                .then(function (response) {
                    console.log(response);
                })
                .catch(function (error) {
                    console.log(error);
                });

            var toastElList = [].slice.call(document.querySelectorAll('.toast'))
            var toastList = toastElList.map(function (toastEl) {
                // Creates an array of toasts (it only initializes them)
                return new bootstrap.Toast(toastEl) // No need for options; use the default options
            });
            toastList.forEach(toast => toast.show()); // this show them
        };

    </script>
    <script type="text/javascript" src="script.js"></script>

</body>

</html>
